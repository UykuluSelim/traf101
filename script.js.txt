

// Traffic Signs Data
const trafficSigns = [
{
image: â€˜data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><polygon points="100,20 180,180 20,180" fill="%23FF0000" stroke="%23FFF" stroke-width="8"/><text x="100" y="140" font-size="60" fill="white" text-anchor="middle" font-weight="bold">STOP</text></svg>â€™,
question: â€˜What does this sign mean?â€™,
choices: [â€˜Stopâ€™, â€˜Yieldâ€™, â€˜Goâ€™, â€˜Slow Downâ€™],
correctAnswer: â€˜Stopâ€™
},
{
image: â€˜data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><polygon points="100,20 180,100 100,180 20,100" fill="%23FFD700" stroke="%23000" stroke-width="6"/><text x="100" y="120" font-size="45" fill="black" text-anchor="middle" font-weight="bold">YIELD</text></svg>â€™,
question: â€˜What does this sign mean?â€™,
choices: [â€˜Mergeâ€™, â€˜Yieldâ€™, â€˜Stopâ€™, â€˜Do Not Enterâ€™],
correctAnswer: â€˜Yieldâ€™
},
{
image: â€˜data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><circle cx="100" cy="100" r="80" fill="white" stroke="%23FF0000" stroke-width="12"/><text x="100" y="130" font-size="70" fill="black" text-anchor="middle" font-weight="bold">50</text></svg>â€™,
question: â€˜What is the maximum speed allowed?â€™,
choices: [â€˜40 mphâ€™, â€˜60 mphâ€™, â€˜50 mphâ€™, â€˜30 mphâ€™],
correctAnswer: â€˜50 mphâ€™
},
{
image: â€˜data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><circle cx="100" cy="100" r="80" fill="white" stroke="%23FF0000" stroke-width="12"/><text x="100" y="90" font-size="45" fill="red" text-anchor="middle" font-weight="bold">NO</text><text x="100" y="140" font-size="40" fill="red" text-anchor="middle" font-weight="bold">PARKING</text></svg>â€™,
question: â€˜What is prohibited here?â€™,
choices: [â€˜No Entryâ€™, â€˜No U-Turnâ€™, â€˜No Parkingâ€™, â€˜No Stoppingâ€™],
correctAnswer: â€˜No Parkingâ€™
},
{
image: â€˜data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><rect x="20" y="20" width="160" height="160" fill="%23FFD700" stroke="%23000" stroke-width="6"/><text x="100" y="80" font-size="35" fill="black" text-anchor="middle" font-weight="bold">SCHOOL</text><text x="100" y="130" font-size="35" fill="black" text-anchor="middle" font-weight="bold">ZONE</text></svg>â€™,
question: â€˜What should you watch out for?â€™,
choices: [â€˜Hospital Aheadâ€™, â€˜Children Crossingâ€™, â€˜Playground Areaâ€™, â€˜Libraryâ€™],
correctAnswer: â€˜Children Crossingâ€™
}
];

// DOM Elements
const startBtn = document.getElementById(â€˜start-btnâ€™);
const quizArea = document.getElementById(â€˜quiz-areaâ€™);
const signImage = document.getElementById(â€˜sign-imageâ€™);
const choicesList = document.getElementById(â€˜choices-listâ€™);
const feedbackDiv = document.getElementById(â€˜feedbackâ€™);
const nextBtn = document.getElementById(â€˜next-btnâ€™);
const scoreSpan = document.getElementById(â€˜scoreâ€™);
const progressBar = document.getElementById(â€˜progress-barâ€™);
const progressFill = document.getElementById(â€˜progress-fillâ€™);

// Game State Variables
let currentQuestionIndex = 0;
let score = 0;
let shuffledQuestions = [];

// Event Listeners
startBtn.addEventListener(â€˜clickâ€™, startGame);
nextBtn.addEventListener(â€˜clickâ€™, () => {
currentQuestionIndex++;
loadQuestion();
});

/**

- Shuffle array using Fisher-Yates algorithm
  */
  function shuffle(array) {
  const newArray = [â€¦array];
  for (let i = newArray.length - 1; i > 0; iâ€“) {
  const j = Math.floor(Math.random() * (i + 1));
  [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
  }
  return newArray;
  }

/**

- Initialize and start the quiz game
  */
  function startGame() {
  startBtn.classList.add(â€˜hideâ€™);
  quizArea.classList.remove(â€˜hideâ€™);
  progressBar.classList.remove(â€˜hideâ€™);
  
  score = 0;
  currentQuestionIndex = 0;
  scoreSpan.textContent = score;
  
  shuffledQuestions = shuffle(trafficSigns);
  loadQuestion();
  }

/**

- Load the current question and display choices
  */
  function loadQuestion() {
  resetState();
  
  if (currentQuestionIndex >= shuffledQuestions.length) {
  endGame();
  return;
  }
  
  const currentQuestion = shuffledQuestions[currentQuestionIndex];
  const progress = ((currentQuestionIndex + 1) / shuffledQuestions.length) * 100;
  progressFill.style.width = progress + â€˜%â€™;
  
  signImage.src = currentQuestion.image;
  document.getElementById(â€˜question-textâ€™).textContent = currentQuestion.question;
  
  currentQuestion.choices.forEach(choice => {
  const li = document.createElement(â€˜liâ€™);
  li.textContent = choice;
  li.addEventListener(â€˜clickâ€™, selectAnswer);
  choicesList.appendChild(li);
  });
  }

/**

- Reset the quiz state for the next question
  */
  function resetState() {
  feedbackDiv.textContent = â€˜â€™;
  nextBtn.classList.add(â€˜hideâ€™);
  
  while (choicesList.firstChild) {
  choicesList.removeChild(choicesList.firstChild);
  }
  }

/**

- Handle answer selection and provide feedback
  */
  function selectAnswer(e) {
  const selectedButton = e.target;
  const correct = selectedButton.textContent === shuffledQuestions[currentQuestionIndex].correctAnswer;
  const choiceButtons = document.querySelectorAll(â€™#choices-list liâ€™);
  
  if (correct) {
  score++;
  scoreSpan.textContent = score;
  feedbackDiv.textContent = â€œâœ“ Correct!â€;
  feedbackDiv.style.color = â€˜#28a745â€™;
  selectedButton.classList.add(â€˜correctâ€™);
  } else {
  feedbackDiv.textContent = â€œâœ— Wrong!â€;
  feedbackDiv.style.color = â€˜#dc3545â€™;
  selectedButton.classList.add(â€˜incorrectâ€™);
  }
  
  choiceButtons.forEach(button => {
  if (button.textContent === shuffledQuestions[currentQuestionIndex].correctAnswer) {
  button.classList.add(â€˜correctâ€™);
  }
  button.removeEventListener(â€˜clickâ€™, selectAnswer);
  button.style.cursor = â€˜defaultâ€™;
  button.style.pointerEvents = â€˜noneâ€™;
  });
  
  nextBtn.classList.remove(â€˜hideâ€™);
  }

/**

- Display final results and end the game
  */
  function endGame() {
  const percentage = Math.round((score / shuffledQuestions.length) * 100);
  let message = â€˜â€™;
  let emoji = â€˜â€™;
  
  if (percentage === 100) {
  message = â€˜Perfect Score! Road Master!â€™;
  emoji = â€˜ğŸ†â€™;
  } else if (percentage >= 80) {
  message = â€˜Excellent! Safe Driver!â€™;
  emoji = â€˜â­â€™;
  } else if (percentage >= 60) {
  message = â€˜Good Job! Keep Learning!â€™;
  emoji = â€˜ğŸ‘â€™;
  } else {
  message = â€˜Study More! Practice Makes Perfect!â€™;
  emoji = â€˜ğŸ“šâ€™;
  }
  
  quizArea.innerHTML = `<h2>${emoji} Quiz Complete! ${emoji}</h2> <p class="final-score">${score} / ${shuffledQuestions.length}</p> <p style="font-size: 1.2em; color: #ffc107; font-weight: bold; margin: 20px 0; text-shadow: 0 0 10px rgba(255, 193, 7, 0.5);">${message}</p> <p style="font-size: 1.1em; margin: 15px 0;">Accuracy: ${percentage}%</p> <button onclick="location.reload()" style="margin-top: 25px;">Play Again</button>`;
  progressBar.classList.add(â€˜hideâ€™);
  }